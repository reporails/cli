rules:
  # Heuristic gate: detect change management indicators
  # Positive indicators (INFO) plus problem detector (WARNING)

  - id: M3-documents-approval
    message: "Documents approval process"
    severity: INFO
    languages: [generic]
    pattern-regex: "(?i)(?:approv(?:al|e)|review|sign-?off)"
    paths:
      include:
        - "**/CLAUDE.md"
        - "**/.claude/rules/*.md"

  - id: M3-documents-change-process
    message: "Documents change management process"
    severity: INFO
    languages: [generic]
    pattern-regex: "(?i)(?:change\\s+(?:management|process)|how\\s+to\\s+(?:update|change))"
    paths:
      include:
        - "**/CLAUDE.md"
        - "**/.claude/rules/*.md"

  - id: M3-ad-hoc-changes
    message: "Instructions suggest ad-hoc changes without process"
    severity: WARNING
    languages: [generic]
    # Detect phrases indicating uncontrolled changes
    pattern-regex: "(?i)(?:feel\\s+free\\s+to\\s+(?:change|modify|update)|just\\s+(?:edit|update)|no\\s+(?:need\\s+for\\s+)?approval)"
    paths:
      include:
        - "**/CLAUDE.md"
        - "**/.claude/rules/*.md"
