rules:
  # Heuristic gate: detect files that may need progressive disclosure
  # Positive indicators (INFO) plus problem detector (WARNING) for large files

  - id: S2-has-import-reference
    message: "File uses @import for progressive disclosure"
    severity: INFO
    languages: [generic]
    pattern-regex: "@[a-zA-Z0-9_/.-]+\\.md"
    paths:
      include:
        - "**/CLAUDE.md"

  - id: S2-has-see-reference
    message: "File uses 'See @...' pattern for progressive disclosure"
    severity: INFO
    languages: [generic]
    pattern-regex: "(?i)see\\s+@[a-zA-Z0-9_/.-]+"
    paths:
      include:
        - "**/CLAUDE.md"

  - id: S2-large-without-imports
    message: "Large file (100+ lines) without @import - consider progressive disclosure"
    severity: WARNING
    languages: [generic]
    # Detect files > 100 lines that have no @ references
    pattern-regex: "(?s)^(?!.*@[a-zA-Z0-9_/.-]+\\.md)(?:[^\\n]*\\n){100,}"
    paths:
      include:
        - "**/CLAUDE.md"
