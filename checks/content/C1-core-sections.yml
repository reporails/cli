rules:
  # Heuristic gate: detect files that may be missing core sections
  # Positive indicators (INFO) for context, plus problem detector (WARNING)

  - id: C1-has-project-heading
    message: "CLAUDE.md has project-related heading"
    severity: INFO
    languages: [generic]
    pattern-regex: "(?i)^##?\\s*(project|context|overview|about)"
    paths:
      include:
        - "**/CLAUDE.md"

  - id: C1-has-commands-heading
    message: "CLAUDE.md has commands/scripts section"
    severity: INFO
    languages: [generic]
    pattern-regex: "(?i)^##?\\s*(commands?|scripts?|quick\\s*start)"
    paths:
      include:
        - "**/CLAUDE.md"

  - id: C1-missing-tech-stack
    message: "CLAUDE.md may be missing tech stack information"
    severity: WARNING
    languages: [generic]
    # Detect files > 50 lines that don't mention any technology
    # Pattern: file with many lines but no tech keywords
    pattern-regex: "(?s)^(?!.*(?:node|python|java|go|rust|typescript|react|django|rails|spring))(?:[^\\n]*\\n){50,}"
    paths:
      include:
        - "**/CLAUDE.md"
